<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–Ω–Ω–∏—Å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–æ—Ç–∞–ª–æ–≤</title>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --accent: #4cc9f0;
            --accent-dark: #4361ee;
            --text-primary: #e6e6e6;
            --text-secondary: #a0a0a0;
            --card-bg: #0f3460;
            --input-bg: #1f4068;
            --success: #4ade80;
            --danger: #f87171;
            --warning: #fbbf24;
            --transition: all 0.3s ease;
        }

        [data-theme="light"] {
            --bg-primary: #f0f4f8;
            --bg-secondary: #d9e2ec;
            --accent: #3b82f6;
            --accent-dark: #2563eb;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --card-bg: #ffffff;
            --input-bg: #f1f5f9;
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            transition: var(--transition);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid var(--accent);
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(to right, var(--accent), var(--accent-dark));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .theme-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--input-bg);
            transition: var(--transition);
            border-radius: 30px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent-dark);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
            background: linear-gradient(45deg, #4facfe, #00f2fe);
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: var(--transition);
            border: 1px solid rgba(76, 201, 240, 0.1);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }

        .card-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 10px;
            font-size: 1.6rem;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        select, input {
            width: 100%;
            padding: 14px 15px;
            background: var(--input-bg);
            border: 2px solid rgba(76, 201, 240, 0.3);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        select:focus, input:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.2);
        }

        .keyboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .key {
            background: var(--input-bg);
            border: 2px solid rgba(76, 201, 240, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
            user-select: none;
        }

        .key:hover {
            background: rgba(76, 201, 240, 0.2);
            transform: translateY(-3px);
        }

        .key:active {
            transform: translateY(1px);
        }

        .reset-key {
            grid-column: span 3;
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .reset-key:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .btn {
            background: linear-gradient(to right, var(--accent), var(--accent-dark));
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .result-card {
            background: var(--input-bg);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .result-card.value {
            border-color: var(--success);
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.2);
        }

        .result-card.no-value {
            border-color: var(--danger);
        }

        .result-card.neutral {
            border-color: var(--warning);
        }

        .result-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-secondary);
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .result-prob {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
        }

        .prob-bar {
            height: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .prob-fill {
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--accent-dark));
            border-radius: 10px;
        }

        .recommendation {
            background: rgba(76, 201, 240, 0.1);
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-top: 25px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .recommendation strong {
            color: var(--accent);
        }

        .score-inputs {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 15px;
            align-items: center;
        }

        .score-separator {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        @media (max-width: 600px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .score-inputs {
                grid-template-columns: 1fr;
            }
            
            .score-separator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéæ –¢–µ–Ω–Ω–∏—Å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–æ—Ç–∞–ª–æ–≤</h1>
            <div class="theme-switch-wrapper">
                <label class="theme-switch">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider"></span>
                </label>
            </div>
        </header>
        
        <div class="card">
            <div class="card-title">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞</div>
            
            <div class="input-group">
                <label for="inputType">–¢–∏–ø –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö</label>
                <select id="inputType">
                    <option value="points">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—á–∫–æ–≤</option>
                    <option value="games">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥–µ–π–º–æ–≤</option>
                </select>
            </div>
            
            <div id="pointsInput">
                <div class="input-group">
                    <label for="p1Serve">–ò–≥—Ä–æ–∫ 1: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞ –æ—á–∫–∞ –Ω–∞ —Å–≤–æ–µ–π –ø–æ–¥–∞—á–µ</label>
                    <input type="number" id="p1Serve" min="0" max="1" step="0.01" value="0.65">
                </div>
                <div class="input-group">
                    <label for="p2Serve">–ò–≥—Ä–æ–∫ 2: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞ –æ—á–∫–∞ –Ω–∞ —Å–≤–æ–µ–π –ø–æ–¥–∞—á–µ</label>
                    <input type="number" id="p2Serve" min="0" max="1" step="0.01" value="0.65">
                </div>
            </div>
            
            <div id="gamesInput" style="display:none;">
                <div class="input-group">
                    <label for="pg1">–ò–≥—Ä–æ–∫ 1: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞ –≥–µ–π–º–∞ –Ω–∞ —Å–≤–æ–µ–π –ø–æ–¥–∞—á–µ</label>
                    <input type="number" id="pg1" min="0" max="1" step="0.01" value="0.83">
                </div>
                <div class="input-group">
                    <label for="pg2">–ò–≥—Ä–æ–∫ 2: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞ –≥–µ–π–º–∞ –Ω–∞ —Å–≤–æ–µ–π –ø–æ–¥–∞—á–µ</label>
                    <input type="number" id="pg2" min="0" max="1" step="0.01" value="0.83">
                </div>
            </div>
            
            <div class="input-group">
                <label>–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç (–≥–µ–π–º—ã)</label>
                <div class="score-inputs">
                    <div>
                        <input type="number" id="score1" min="0" value="7" class="score-input">
                    </div>
                    <div class="score-separator">:</div>
                    <div>
                        <input type="number" id="score2" min="0" value="6" class="score-input">
                    </div>
                </div>
            </div>
            
            <div class="keyboard">
                <div class="key" data-value="0">0</div>
                <div class="key" data-value="1">1</div>
                <div class="key" data-value="2">2</div>
                <div class="key" data-value="3">3</div>
                <div class="key" data-value="4">4</div>
                <div class="key" data-value="5">5</div>
                <div class="key" data-value="6">6</div>
                <div class="key" data-value="7">7</div>
                <div class="key" data-value="8">8</div>
                <div class="key" data-value="9">9</div>
                <div class="key reset-key" id="resetScore">–°–±—Ä–æ—Å</div>
            </div>
            
            <button id="calculateBtn" class="btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏</button>
        </div>
        
        <div class="card">
            <div class="card-title">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</div>
            <div id="results">
                <div class="results-grid">
                    <div class="result-card value">
                        <div class="result-title">–¢–æ—Ç–∞–ª 17.5</div>
                        <div class="result-value">86.4%</div>
                        <div class="result-prob">–ö—ç—Ñ: 1.16</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: 86%"></div>
                        </div>
                    </div>
                    
                    <div class="result-card value">
                        <div class="result-title">–¢–æ—Ç–∞–ª 18.5</div>
                        <div class="result-value">72.1%</div>
                        <div class="result-prob">–ö—ç—Ñ: 1.39</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: 72%"></div>
                        </div>
                    </div>
                    
                    <div class="result-card neutral">
                        <div class="result-title">–¢–æ—Ç–∞–ª 19.5</div>
                        <div class="result-value">53.8%</div>
                        <div class="result-prob">–ö—ç—Ñ: 1.86</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: 54%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="recommendation">
                    <strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ù–∞–∏–±–æ–ª—å—à–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å—Ç–∞–≤–∫–µ –Ω–∞ –¢–ë 19.5 - –≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–±–∏—Ç–∏—è (53.8%) –ø—Ä–∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ 1.86. –ï—Å–ª–∏ –±—É–∫–º–µ–∫–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã—à–µ 2.10, —ç—Ç–æ –±—É–¥–µ—Ç value-—Å—Ç–∞–≤–∫–∞.
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('change', function() {
            document.body.setAttribute('data-theme', this.checked ? 'light' : 'dark');
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–≤–æ–¥–∞
        document.getElementById('inputType').addEventListener('change', function() {
            const type = this.value;
            document.getElementById('pointsInput').style.display = type === 'points' ? 'block' : 'none';
            document.getElementById('gamesInput').style.display = type === 'games' ? 'block' : 'none';
        });

        // –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
        let activeInput = null;
        const scoreInputs = document.querySelectorAll('.score-input');
        
        scoreInputs.forEach(input => {
            input.addEventListener('focus', function() {
                activeInput = this;
            });
        });
        
        document.querySelectorAll('.key').forEach(key => {
            if (key.id !== 'resetScore') {
                key.addEventListener('click', function() {
                    if (activeInput) {
                        activeInput.value = activeInput.value === '0' ? 
                            this.getAttribute('data-value') : 
                            activeInput.value + this.getAttribute('data-value');
                    }
                });
            }
        });
        
        document.getElementById('resetScore').addEventListener('click', function() {
            if (activeInput) activeInput.value = '0';
        });

        // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –≤—ã–∏–≥—Ä—ã—à–∞ –≥–µ–π–º–∞
        function gameWinProb(p) {
            if (p >= 0.999) return 1;
            if (p <= 0.001) return 0;
            const q = 1 - p;
            const p4 = p ** 4;
            const winWithoutDeuce = p4 * (1 + 4 * q + 10 * q * q);
            const goDeuce = 20 * p ** 3 * q ** 3;
            const probDeuce = (p * p) / (p * p + q * q);
            const winAfterDeuce = goDeuce * probDeuce;
            return winWithoutDeuce + winAfterDeuce;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Ç–∞
        function isFinal(i, j) {
            if (i >= 6 && j >= 6 && Math.abs(i - j) >= 2) return true;
            if (i >= 6 && i - j >= 2) return true;
            if (j >= 6 && j - i >= 2) return true;
            return false;
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞
        function calculateProbabilities() {
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            const inputType = document.getElementById('inputType').value;
            let pg1, pg2;
            
            if (inputType === 'points') {
                const p1Serve = parseFloat(document.getElementById('p1Serve').value);
                const p2Serve = parseFloat(document.getElementById('p2Serve').value);
                pg1 = gameWinProb(p1Serve);
                pg2 = gameWinProb(p2Serve);
            } else {
                pg1 = parseFloat(document.getElementById('pg1').value);
                pg2 = parseFloat(document.getElementById('pg2').value);
            }
            
            const a = parseInt(document.getElementById('score1').value);
            const b = parseInt(document.getElementById('score2').value);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
            if (isNaN(pg1) || isNaN(pg2) || isNaN(a) || isNaN(b) || 
                pg1 < 0 || pg1 > 1 || pg2 < 0 || pg2 > 1 || a < 0 || b < 0) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è");
                return;
            }
            
            // –ï—Å–ª–∏ —Å–µ—Ç —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω
            if (isFinal(a, b)) {
                const totalGames = a + b;
                const p17 = totalGames >= 18 ? 1 : 0;
                const p18 = totalGames >= 19 ? 1 : 0;
                const p19 = totalGames >= 20 ? 1 : 0;
                
                displayResults(p17, p18, p19, totalGames);
                return;
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–µ–π–º–æ–≤
            const maxGames = a + b + 30;
            let states = {};
            states[`${a},${b}`] = 1;
            
            let finalProbs = {};
            
            for (let totalGames = a + b; totalGames <= maxGames; totalGames++) {
                const nextStates = {};
                let hasStates = false;
                
                for (const stateKey in states) {
                    const [i, j] = stateKey.split(',').map(Number);
                    const pState = states[stateKey];
                    
                    if (isFinal(i, j)) {
                        finalProbs[stateKey] = (finalProbs[stateKey] || 0) + pState;
                        continue;
                    }
                    
                    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–∞—é—â–µ–≥–æ
                    const p1Win = (totalGames % 2 === 0) ? pg1 : (1 - pg2);
                    
                    // –°–ª–µ–¥—É—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                    const nextState1 = `${i + 1},${j}`;
                    const nextState2 = `${i},${j + 1}`;
                    
                    nextStates[nextState1] = (nextStates[nextState1] || 0) + pState * p1Win;
                    nextStates[nextState2] = (nextStates[nextState2] || 0) + pState * (1 - p1Win);
                    hasStates = true;
                }
                
                if (!hasStates) break;
                states = nextStates;
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
            for (const stateKey in states) {
                finalProbs[stateKey] = (finalProbs[stateKey] || 0) + states[stateKey];
            }
            
            // –†–∞—Å—á–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≥–µ–π–º–æ–≤
            const distTotal = {};
            for (const stateKey in finalProbs) {
                const [i, j] = stateKey.split(',').map(Number);
                const total = i + j;
                distTotal[total] = (distTotal[total] || 0) + finalProbs[stateKey];
            }
            
            // –†–∞—Å—á–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ç–æ—Ç–∞–ª–æ–≤
            let p17 = 0, p18 = 0, p19 = 0;
            for (const total in distTotal) {
                const totalInt = parseInt(total);
                const prob = distTotal[total];
                
                if (totalInt >= 18) p17 += prob;
                if (totalInt >= 19) p18 += prob;
                if (totalInt >= 20) p19 += prob;
            }
            
            displayResults(p17, p18, p19);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults(p17, p18, p19) {
            const fair17 = p17 > 0 ? (1 / p17).toFixed(2) : '-';
            const fair18 = p18 > 0 ? (1 / p18).toFixed(2) : '-';
            const fair19 = p19 > 0 ? (1 / p19).toFixed(2) : '-';
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ value-—Å—Ç–∞–≤–æ–∫
            const isValue17 = fair17 > 0 && parseFloat(fair17) > 1.65;
            const isValue18 = fair18 > 0 && parseFloat(fair18) > 1.90;
            const isValue19 = fair19 > 0 && parseFloat(fair19) > 2.10;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
            let resultsHTML = `
                <div class="results-grid">
                    <div class="result-card ${isValue17 ? 'value' : 'no-value'}">
                        <div class="result-title">–¢–æ—Ç–∞–ª 17.5</div>
                        <div class="result-value">${(p17 * 100).toFixed(1)}%</div>
                        <div class="result-prob">–ö—ç—Ñ: ${fair17}</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: ${p17 * 100}%"></div>
                        </div>
                    </div>
                    
                    <div class="result-card ${isValue18 ? 'value' : 'no-value'}">
                        <div class="result-title">–¢–æ—Ç–∞–ª 18.5</div>
                        <div class="result-value">${(p18 * 100).toFixed(1)}%</div>
                        <div class="result-prob">–ö—ç—Ñ: ${fair18}</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: ${p18 * 100}%"></div>
                        </div>
                    </div>
                    
                    <div class="result-card ${isValue19 ? 'value' : 'neutral'}">
                        <div class="result-title">–¢–æ—Ç–∞–ª 19.5</div>
                        <div class="result-value">${(p19 * 100).toFixed(1)}%</div>
                        <div class="result-prob">–ö—ç—Ñ: ${fair19}</div>
                        <div class="prob-bar">
                            <div class="prob-fill" style="width: ${p19 * 100}%"></div>
                        </div>
                    </div>
                </div>
            `;
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            let recommendation = '';
            if (isValue19) {
                recommendation = `<strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ù–∞–∏–±–æ–ª—å—à–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å—Ç–∞–≤–∫–µ –Ω–∞ –¢–ë 19.5 - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–±–∏—Ç–∏—è ${(p19 * 100).toFixed(1)}% –ø—Ä–∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ ${fair19}. –ï—Å–ª–∏ –±—É–∫–º–µ–∫–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã—à–µ 2.10, —ç—Ç–æ –±—É–¥–µ—Ç value-—Å—Ç–∞–≤–∫–∞.`;
            } else if (isValue18) {
                recommendation = `<strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –°—Ç–∞–≤–∫–∞ –Ω–∞ –¢–ë 18.5 –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é ${(p18 * 100).toFixed(1)}% –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º ${fair18}. –ò—â–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤—ã—à–µ 1.90.`;
            } else if (isValue17) {
                recommendation = `<strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –¢–ë 17.5 –∏–º–µ–µ—Ç –≤—ã—Å–æ–∫—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–±–∏—Ç–∏—è (${(p17 * 100).toFixed(1)}%), –Ω–æ –Ω–∏–∑–∫–∏–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç (${fair17}). –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã—à–µ 1.65.`;
            } else {
                recommendation = `<strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ü—Ä–∏ —Ç–µ–∫—É—â–µ–º —Å—á—ë—Ç–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –Ω–µ—Ç —è–≤–Ω—ã—Ö value-—Å—Ç–∞–≤–æ–∫. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –¥–æ–∂–¥–∞—Ç—å—Å—è –±–æ–ª–µ–µ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞.`;
            }
            
            resultsHTML += `<div class="recommendation">${recommendation}</div>`;
            
            document.getElementById('results').innerHTML = resultsHTML;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById('calculateBtn').addEventListener('click', calculateProbabilities);
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∏–Ω–ø—É—Ç —Å—á–µ—Ç–∞
        document.getElementById('score1').focus();
    </script>
</body>
</html>
